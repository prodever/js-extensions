/*! declare.js - v0.0.3 - 2013-01-25
* Copyright (c) 2013 Doug Martin (doug@dougamartin.com); Licensed MIT */
(function(){function e(){function i(t,n){return n=n||0,e.call(t,n)}function s(e){return Object.prototype.toString.call(e)==="[object Array]"}function o(e){var t;return e!==null&&e!==t&&typeof e=="object"}function u(e){var t=o(e);return t&&e.constructor===Object}function f(e,t){if(e&&e.length)for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function l(e,t,n){var r,i;for(r in t)if(t.hasOwnProperty(r)&&f(n,r)===-1){i=t[r];if(!(r in e)||e[r]!==i)e[r]=i}return e}function c(e,t){var n=this.__meta,r=n.supers,i=r.length,o=n.superMeta,u=o.pos;if(i>u){e=e?!a(e)&&!s(e)?[e]:e:[];var f=o.name,l=o.f,c;do{c=r[u][f];if("function"==typeof c&&(c=c._f||c)!==l)return o.pos=1+u,c.apply(this,e)}while(i>++u)}return null}function h(){var e=this.__meta,t=e.supers,n=t.length,r=e.superMeta,i=r.pos;if(n>i){var s=r.name,o=r.f,u;do{u=t[i][s];if("function"==typeof u&&(u=u._f||u)!==o)return r.pos=1+i,u.bind(this)}while(n>++i)}return null}function p(e){var t=this.__getters__;return t.hasOwnProperty(e)?t[e].apply(this):this[e]}function d(e,t){var n=this.__setters__;if(!u(e))return n.hasOwnProperty(e)?n[e].apply(this,i(arguments,1)):this[e]=t;for(var r in e){var s=e[r];n.hasOwnProperty(r)?n[e].call(this,s):this[r]=s}}function v(){var e=this.__meta||{},t=e.supers,n=t.length,r=e.superMeta,i=r.pos;if(n>i){var s=r.name,o=r.f,u;do{u=t[i][s];if("function"==typeof u&&(u=u._f||u)!==o)return r.pos=1+i,u.apply(this,arguments)}while(n>++i)}return null}function m(e,t){var n=function(){var r,i=this.__meta||{},s=i.superMeta;return i.superMeta={f:e,pos:0,name:t},r=e.apply(this,arguments),i.superMeta=s,r};return n._f=e,n}function g(e,t){var n=t.setters||{},r=e.__setters__,i=e.__getters__;for(var s in n)r.hasOwnProperty(s)||(r[s]=n[s]);n=t.getters||{};for(s in n)i.hasOwnProperty(s)||(i[s]=n[s]);for(var o in t)if(o!=="getters"&&o!=="setters"){var u=t[o];"function"==typeof u?e.hasOwnProperty(o)||(e[o]=m(v,o)):e[o]=u}}function y(){var e=i(arguments),t=e.length,n=this.prototype,r=n.__meta,s=this.__meta,o=n.__meta.bases,u=o.slice(),a=s.supers||[],f=r.supers||[];for(var l=0;l<t;l++){var c=e[l],h=c.prototype,p=h.__meta,d=c.__meta;!p&&(p=h.__meta={proto:h||{}}),!d&&(d=c.__meta={proto:c.__proto__||{}}),g(n,p.proto||{}),g(this,d.proto||{}),b(c.prototype,f,o),b(c,a,u)}return this}function b(e,n,r){var i=e.__meta;!i&&(i=e.__meta={});var s=e.__meta.unique;!s&&(i.unique="declare"+ ++t);if(f(r,s)===-1){r.push(s);var o=e.__meta.supers||[],u=o.length-1||0;while(u>=0)b(o[u--],n,r);n.unshift(e)}}function w(e,t){var n=t.setters,r=e.__setters__,i=e.__getters__;if(n)for(var s in n)r[s]=n[s];n=t.getters||{};if(n)for(s in n)i[s]=n[s];for(s in t)if(s!="getters"&&s!="setters"){var o=t[s];if("function"==typeof o){var u=o.__meta||{};u.isConstructor?e[s]=o:e[s]=m(o,s)}else e[s]=o}}function E(e,t){return e&&t?e[t]=this:e.exports=e=this,this}function S(e){return N(this,e)}function x(e){r.prototype=e.prototype;var t=new r;return r.prototype=null,t}function T(e,r,i){var o={},a=[],f="declare"+ ++t,p=[],d=[],g=[],E=[],S={supers:g,unique:f,bases:p,superMeta:{f:null,pos:0,name:null}},T={supers:E,unique:f,bases:d,isConstructor:!0,superMeta:{f:null,pos:0,name:null}};u(r)&&!i&&(i=r,r=n),"function"==typeof r||s(r)?(a=s(r)?r:[r],r=a.shift(),e.__meta=T,o=x(r),o.__meta=S,o.__getters__=l({},o.__getters__||{}),o.__setters__=l({},o.__setters__||{}),e.__getters__=l({},e.__getters__||{}),e.__setters__=l({},e.__setters__||{}),b(r.prototype,g,p),b(r,E,d)):(e.__meta=T,o.__meta=S,o.__getters__=o.__getters__||{},o.__setters__=o.__setters__||{},e.__getters__=e.__getters__||{},e.__setters__=e.__setters__||{}),e.prototype=o;if(i){var N=S.proto=i.instance||{},C=T.proto=i.static||{};C.init=C.init||v,w(o,N),w(e,C),N.hasOwnProperty("constructor")?o.constructor=m(N.constructor,"constructor"):o.constructor=N.constructor=m(v,"constructor")}else S.proto={},T.proto={},e.init=m(v,"init"),o.constructor=m(v,"constructor");a.length&&y.apply(e,a),r&&l(e,l(l({},r),e)),o._super=e._super=c,o._getSuper=e._getSuper=h,o._static=e}function N(e,t){function n(){this.constructor.apply(this,arguments)}return T(n,e,t),n.init()||n}function C(e,t){function r(){return n||(this.constructor.apply(this,arguments),n=this),n}var n;return T(r,e,t),r.init()||r}var e=Array.prototype.slice,t=0,n,r=new Function,a=function(t){return Object.prototype.toString.call(t)==="[object Arguments]"};return a(arguments)||(a=function(t){return!!t&&!!t.hasOwnProperty("callee")}),n=N({instance:{get:p,set:d},"static":{get:p,set:d,mixin:y,extend:S,as:E}}),N.singleton=C,N}"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports&&(module.exports=e()):"function"==typeof define?define(e):this.declare=e()})();