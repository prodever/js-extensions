(function(){function n(t,n){return n=n||0,e.call(t,n)}function r(e){return Object.prototype.toString.call(e)==="[object Array]"}function i(e){var t;return e!==null&&e!==t&&typeof e=="object"}function s(e){var t=i(e);return t&&e.constructor===Object}function o(e,t){var n=this.__meta,r=n.supers,i=r.length,s=n.superMeta,o=s.pos;if(i>o){t&&(e=t);var u=s.name,a=s.f,f;do{f=r[o][u];if("function"==typeof f&&(f=f._f||f)!==a)return s.pos=1+o,f.apply(this,e)}while(i>++o)}return null}function u(){var e=this.__meta,t=e.supers,n=t.length,r=e.superMeta,i=r.pos;if(n>i){var s=r.name,o=r.f,u;do{u=t[i][s];if("function"==typeof u&&(u=u._f||u)!==o)return r.pos=1+i,u.bind(this)}while(n>++i)}return null}function a(e){var t=this.__getters__;return t.hasOwnProperty(e)?t[e].apply(this):this[e]}function f(e,t){var r=this.__setters__;return r.hasOwnProperty(e)?r[e].apply(this,n(arguments,1)):this[e]=t}function l(){var e=this.__meta||{},t=e.supers,n=t.length,r=e.superMeta,i=r.pos;if(n>i){var s=r.name,o=r.f,u;do{u=t[i][s];if("function"==typeof u&&(u=u._f||u)!==o)return r.pos=1+i,u.apply(this,arguments)}while(n>++i)}return null}function c(e,t){var n=function(){var r,i=this.__meta||{},s=i.superMeta;return i.superMeta={f:e,pos:0,name:t},r=e.apply(this,arguments),i.superMeta=s,r};return n._f=e,n}function h(e,t){var n=t.setters||{},r=e.__setters__,i=e.__getters__;for(var s in n)r.hasOwnProperty(s)||(r[s]=n[s]);n=t.getters||{};for(s in n)i.hasOwnProperty(s)||(i[s]=n[s]);for(var o in t)if(o!="getters"&&o!="setters"){var u=t[o];"function"==typeof u?e.hasOwnProperty(o)||(e[o]=c(l,o)):e[o]=u}}function p(){var e=n(arguments),t=e.length,r=this.prototype,i=r.__meta,s=this.__meta,o=r.__meta.bases,u=o.slice(),a=s.supers||[],f=i.supers||[];for(var l=0;l<t;l++){var c=e[l],p=c.prototype,v=p.__meta,m=c.__meta;!v&&(v=p.__meta={proto:p||{}}),!m&&(m=c.__meta={proto:c.__proto__||{}}),h(r,v.proto||{}),h(this,m.proto||{}),d(c.prototype,f,o),d(c,a,u)}return this}function d(e,n,r){var i=e.__meta;!i&&(i=e.__meta={});var s=e.__meta.unique;!s&&(i.unique="declare"+ ++t);if(r.indexOf(s)==-1){r.push(s);var o=e.__meta.supers||[],u=o.length-1||0;while(u>=0)d(o[u--],n,r);n.unshift(e)}}function v(e,t){var n=t.setters,r=e.__setters__,i=e.__getters__;if(n)for(var s in n)r[s]=n[s];n=t.getters||{};if(n)for(s in n)i[s]=n[s];for(s in t)if(s!="getters"&&s!="setters"){var o=t[s];if("function"==typeof o){var u=o.__meta||{};u.isConstructor?e[s]=o:e[s]=c(o,s)}else e[s]=o}}function m(e,t){return e&&t?e[t]=this:e.exports=e=this,this}function g(e){return b(this,e)}function y(e,n,i){var a=e.prototype,f=[],h="declare"+ ++t,m=[],g=[],y=[],b=[],w=a.__meta={supers:y,unique:h,bases:m,superMeta:{f:null,pos:0,name:null}},S=e.__meta={supers:b,unique:h,bases:g,isConstructor:!0,superMeta:{f:null,pos:0,name:null}};s(n)&&!i&&(i=n,n=E),"function"==typeof n||r(n)?(f=r(n)?n:[n],n=f.shift(),e.__proto__=n,a.__proto__=n.prototype,d(n.prototype,y,m),d(n,b,g)):(a.__getters__=a.__getters__||{},a.__setters__=a.__setters__||{},e.__getters__=e.__getters__||{},e.__setters__=e.__setters__||{});if(i){var x=w.proto=i.instance||{};!x.hasOwnProperty("constructor")&&(x.constructor=l);var T=S.proto=i.static||{};T.init=T.init||l,v(a,x,!1),v(e,T,!0)}else w.proto={},S.proto={},e.init=c(l,"init"),a.constructor=c(l,"constructor");f.length&&p.apply(e,f),a._super=e._super=o,a._getSuper=e._getSuper=u,a._static=e}function b(e,t){var n=function(){this.constructor.apply(this,arguments)};return y(n,e,t),n.init()||n}function w(e,t){var n,r=function(){return n||(this.constructor.apply(this,arguments),n=this),n};return y(r,e,t),r.init()||r}var e=Array.prototype.slice,t=0,E=b({instance:{get:a,set:f},"static":{get:a,set:f,mixin:p,extend:g,as:m}});b.singleton=w,typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=b),exports.declare=b):this.declare=b})();