<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>declare</title>
    <link rel="stylesheet" href="./assets/css/bootstrap.css">
    <link rel="stylesheet" href="./assets/css/prettify.css">
    <style type="text/css">
        

/*.subnav-inner {*/
    /*width: 100%;*/
    /*height: 36px;*/
    /*background-color: #EEE;*/
    /*background-repeat: repeat-x;*/
    /*background-image: -moz-linear-gradient(top, whiteSmoke 0%, #EEE 100%);*/
    /*background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, whiteSmoke), color-stop(100%, #EEE));*/
    /*background-image: -webkit-linear-gradient(top, whiteSmoke 0%, #EEE 100%);*/
    /*background-image: -ms-linear-gradient(top, whiteSmoke 0%, #EEE 100%);*/
    /*background-image: -o-linear-gradient(top, whiteSmoke 0%, #EEE 100%);*/
    /*filter: progid:DXImageTransform.Microsoft.gradient(startColorstr = '#f5f5f5', endColorstr = '#eeeeee', GradientType = 0);*/
    /*background-image: linear-gradient(top, whiteSmoke 0%, #EEE 100%);*/
    /*-webkit-border-radius: 4px;*/
    /*-moz-border-radius: 4px;*/
    /*border-radius: 4px;*/
/*}*/

/*.subnav .nav > li > a:hover {*/
    /*color: black !important;*/
/*}*/

/*.subnav .nav li.dropdown .dropdown-toggle .caret,*/
/*.subnav .nav li.dropdown.open .caret {*/
    /*border-top-color: #999 !important;*/
    /*border-bottom-color: #999 !important;*/
/*}*/

/*.subnav-fixed {*/
    /*position: fixed;*/
    /*width : 90%;*/
    /*margin-right: auto;*/
    /*margin-left: auto;*/
    /*top: 40px;*/
    /*left: 0;*/
    /*right: 0;*/
    /*z-index: 1020;*/
    /*border-color: #D5D5D5;*/
    /*border-width: 0 0 1px;*/
    /*-webkit-border-radius: 0;*/
    /*-moz-border-radius: 0;*/
    /*border-radius: 0;*/
    /*-webkit-box-shadow: inset 0 1px 0 #fff, 0 1px 5px rgba(0,0,0,.1);*/
    /*-moz-box-shadow: inset 0 1px 0 #fff, 0 1px 5px rgba(0,0,0,.1);*/
    /*box-shadow: inset 0 1px 0 #fff, 0 1px 5px rgba(0,0,0,.1);*/
    /*filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);*/
/*}*/

/*.navbar .nav  .dropdown-menu {*/
    /*max-height: 500px;*/
    /*overflow: auto;*/
/*}â€‹*/

    </style>
    <style type="text/css">
        body {
            padding: 90px;
        }

        .subnav{
            margin-top: 40px;
            margin-right: auto;
            margin-left: auto;
            z-index: 1000;
        }

        @media (max-width:979px) {
            .subnav{
                margin-top: auto;
            }
        }
    </style>
    <link rel="stylesheet" href="./assets/css/bootstrap-responsive.css">
    <script type="text/javascript">
        var init = (function () {
            "use strict";

            var processScroll = (function () {
                var curr = null, prev = null;
                return function (nav) {
                    var $win = $(window);
                    $('.subnav').each(function () {
                        var nav = $(this);
                        var navTop = $win.width() < 980 ? 0 : nav.offset().top - 40;

                        var scrollTop = $win.scrollTop();
                        if (scrollTop >= navTop && curr != nav) {
                            if(curr){
                                curr.removeClass('subnav-fixed')
                                prev = curr;
                            }
                            curr = nav;
                            curr.addClass('subnav-fixed')
                        } else if (curr == nav && scrollTop <= navTop) {
                            curr.removeClass('subnav-fixed');
                            prev.addClass('subnav-fixed');
                            curr = prev;
                        }else{
                            nav.removeClass('subnav-fixed');
                        }
                    });
                };
            })();

            return function () {
                window.prettyPrint && prettyPrint();
                $(".collapse").collapse();
                var $window = $(window);
                //$(".subnav").affix ();
                // fix sub nav on scroll
//                processScroll();
//                $(window).on('scroll', processScroll)
            }
        })();
    </script>
</head>
<body onload="init()">
<div class="navbar navbar-fixed-top navbar-inverse">
    <div class="navbar-inner">
        <div class="container">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"> </span>
            </a>
            
            <a href="./index.html" class="brand">declare</a>
            
            <div class="nav-collapse">
                <ul class="nav">
                    

                        
                    
                </ul>
                
                <ul class="nav pull-right">

                    <li class="divider-vertical"></li>
                    <li><a href="http://github.com/doug-martin/declare.js" target="#github" class="pull-right">github</a></li>
                </ul>
                
            </div>
        </div>
    </div>
</div>



<div class="container-fluid">
    <a name="top"></a>
    <div class="container">




  <p>Declare is a library designed to allow writing object oriented code the same way in both the browser and node.js.

</p>
<h2>Installation</h2>
<p><code>npm install declare.js</code>

</p>
<p>Or <a href="http://github.com/doug-martin/declare.js/declare.js">download the source</a> (<a href="http://github.com/doug-martin/declare.js/declare-min.js">minified</a>)


</p>
<h2>Usage</h2>
<p>declare.js provides

</p>
<p>Class methods

</p>
<ul>
<li><code>as(module | object, name)</code> : exports the object to module or the object with the name</li>
<li><code>mixin(mixin)</code> : mixes in an object but does not inherit directly from the object. <strong>Note</strong> this does not return a new class but changes the original class.</li>
<li><code>extend(proto)</code> : extend a class with the given properties. A shortcut to <code>declare(Super, {})</code>;</li>
</ul>
<p>Instance methods

</p>
<ul>
<li><code>_super(arguments)</code>: calls the super of the current method, you can pass in either the argments object or an array with arguments you want passed to super</li>
<li><code>_getSuper()</code>: returns a this methods direct super.</li>
<li><code>_static</code> : use to reference class properties and methods.</li>
<li><code>get(prop)</code> : gets a property invoking the getter if it exists otherwise it just returns the named property on the object.</li>
<li><code>set(prop, val)</code> : sets a property invoking the setter if it exists otherwise it just sets the named property on the object.</li>
</ul>
<h3>Declaring a new Class</h3>
<p>Creating a new class with declare is easy!

</p>
<pre class='prettyprint linenums lang-js'><code>
var Mammal = declare({
     //define your instance methods and properties
     instance : {

         //will be called whenever a new instance is created
         constructor: function(options) {
             options = options || {};
             this._super(arguments);
             this._type = options.type || &quot;mammal&quot;;
         },

         speak : function() {
             return  &quot;A mammal of type &quot; + this._type + &quot; sounds like&quot;;
         },

         //Define your getters
         getters : {

             //can be accessed by using the get method. (mammal.get(&quot;type&quot;))
             type : function() {
                 return this._type;
             }
         },

          //Define your setters
         setters : {

               //can be accessed by using the set method. (mammal.set(&quot;type&quot;, &quot;mammalType&quot;))
             type : function(t) {
                 this._type = t;
             }
         }
     },

     //Define your static methods
     static : {

         //Mammal.soundOff(); //&quot;Im a mammal!!&quot;
         soundOff : function() {
             return &quot;Im a mammal!!&quot;;
         }
     }
});</code></pre>
<p>You can use Mammal just like you would any other class.

</p>
<pre class='prettyprint linenums lang-js'><code>Mammal.soundOff(&quot;Im a mammal!!&quot;);

var myMammal = new Mammal({type : &quot;mymammal&quot;});
myMammal.speak(); // &quot;A mammal of type mymammal sounds like&quot;
myMammal.get(&quot;type&quot;); //&quot;mymammal&quot;
myMammal.set(&quot;type&quot;, &quot;mammal&quot;);
myMammal.get(&quot;type&quot;); //&quot;mammal&quot;</code></pre>
<h3>Extending a class</h3>
<p>If you want to just extend a single class use the .extend method.

</p>
<pre class='prettyprint linenums lang-js'><code>
var Wolf = Mammal.extend({

  //define your instance method
  instance: {

       //You can override super constructors just be sure to call `_super`
      constructor: function(options) {
         options = options || {};
         this._super(arguments); //call our super constructor.
         this._sound = &quot;growl&quot;;
         this._color = options.color || &quot;grey&quot;;
     },

     //override Mammals `speak` method by appending our own data to it.
     speak : function() {
         return this._super(arguments) + &quot; a &quot; + this._sound;
     },

     //add new getters for sound and color
     getters : {

          //new Wolf().get(&quot;type&quot;)
          //notice color is read only as we did not define a setter
         color : function() {
             return this._color;
         },

         //new Wolf().get(&quot;sound&quot;)
         sound : function() {
             return this._sound;
         }
     },

     setters : {

         //new Wolf().set(&quot;sound&quot;, &quot;howl&quot;)
         sound : function(s) {
             this._sound = s;
         }
     }

 },

 static : {

     //You can override super static methods also! And you can still use _super
     soundOff : function() {
         //You can even call super in your statics!!!
         //should return &quot;I&#39;m a mammal!! that growls&quot;
         return this._super(arguments) + &quot; that growls&quot;;
     }
 }
});

Wolf.soundOff(); //Im a mammal!! that growls

var myWolf = new Wolf();
myWolf instanceof Mammal //true
myWolf instanceof Wolf //true</code></pre>
<p>You can also extend a class by using the declare method and just pass in the super class.

</p>
<pre class='prettyprint linenums lang-js'><code>//Typical hierarchical inheritance
// Mammal-&gt;Wolf-&gt;Dog
var Dog = declare(Wolf, {
   instance: {
       constructor: function(options) {
           options = options || {};
           this._super(arguments);
           //override Wolfs initialization of sound to woof.
           this._sound = &quot;woof&quot;;

       },

       speak : function() {
           //Should return &quot;A mammal of type mammal sounds like a growl thats domesticated&quot;
           return this._super(arguments) + &quot; thats domesticated&quot;;
       }
   },

   static : {
       soundOff : function() {
           //should return &quot;I&#39;m a mammal!! that growls but now barks&quot;
           return this._super(arguments) + &quot; but now barks&quot;;
       }
   }
});

Dog.soundOff(); //Im a mammal!! that growls but now barks

var myDog = new Dog();
myDog instanceof Mammal //true
myDog instanceof Wolf //true
myDog instanceof Dog //true


//Notice you still get the extend method.

// Mammal-&gt;Wolf-&gt;Dog-&gt;Breed
var Breed = Dog.extend({
   instance: {

       //initialize outside of constructor
       _pitch : &quot;high&quot;,

       constructor: function(options) {
           options = options || {};
           this._super(arguments);
           this.breed = options.breed || &quot;lab&quot;;
       },

       speak : function() {
           //Should return &quot;A mammal of type mammal sounds like a
           //growl thats domesticated with a high pitch!&quot;
           return this._super(arguments) + &quot; with a &quot; + this._pitch + &quot; pitch!&quot;;
       },

       getters : {
           pitch : function() {
               return this._pitch;
           }
       }
   },

   static : {
       soundOff : function() {
           //should return &quot;I&#39;M A MAMMAL!! THAT GROWLS BUT NOW BARKS!&quot;
           return this._super(arguments).toUpperCase() + &quot;!&quot;;
       }
   }
});


Breed.soundOff()//&quot;IM A MAMMAL!! THAT GROWLS BUT NOW BARKS!&quot;

var myBreed = new Breed({color : &quot;gold&quot;, type : &quot;lab&quot;}),
myBreed instanceof Dog //true
myBreed instanceof Wolf //true
myBreed instanceof Mammal //true
myBreed.speak() //&quot;A mammal of type lab sounds like a woof thats domesticated with a high pitch!&quot;
myBreed.get(&quot;type&quot;) //&quot;lab&quot;
myBreed.get(&quot;color&quot;) //&quot;gold&quot;
myBreed.get(&quot;sound&quot;)&quot; //&quot;woof&quot;</code></pre>
<h3>Multiple Inheritance / Mixins</h3>
<p>declare also allows the use of multiple super classes.
This is useful if you have generic classes that provide functionality but shouldnt be used on their own.

</p>
<p>Lets declare a mixin that allows us to watch for property changes.

</p>
<pre class='prettyprint linenums lang-js'><code>//Notice that we set up the functions outside of declare because we can reuse them

function _set(prop, val) {
    //get the old value
    var oldVal = this.get(prop);
    //call super to actually set the property
    var ret = this._super(arguments);
    //call our handlers
    this.__callHandlers(prop, oldVal, val);
    return ret;
}

function _callHandlers(prop, oldVal, newVal) {
   //get our handlers for the property
    var handlers = this.__watchers[prop], l;
    //if the handlers exist and their length does not equal 0 then we call loop through them
    if (handlers &amp;&amp; (l = handlers.length) !== 0) {
        for (var i = 0; i &lt; l; i++) {
            //call the handler
            handlers[i].call(null, prop, oldVal, newVal);
        }
    }
}


//the watch function
function _watch(prop, handler) {
    if (&quot;function&quot; !== typeof handler) {
        //if its not a function then its an invalid handler
        throw new TypeError(&quot;Invalid handler.&quot;);
    }
    if (!this.__watchers[prop]) {
        //create the watchers if it doesnt exist
        this.__watchers[prop] = [handler];
    } else {
        //otherwise just add it to the handlers array
        this.__watchers[prop].push(handler);
    }
}

function _unwatch(prop, handler) {
    if (&quot;function&quot; !== typeof handler) {
        throw new TypeError(&quot;Invalid handler.&quot;);
    }
    var handlers = this.__watchers[prop], index;
    if (handlers &amp;&amp; (index = handlers.indexOf(handler)) !== -1) {
       //remove the handler if it is found
        handlers.splice(index, 1);
    }
}

declare({
    instance:{
        constructor:function () {
            this._super(arguments);
            //set up our watchers
            this.__watchers = {};
        },

        //override the default set function so we can watch values
        &quot;set&quot;:_set,
        //set up our callhandlers function
        __callHandlers:_callHandlers,
        //add the watch function
        watch:_watch,
        //add the unwatch function
        unwatch:_unwatch
    },

    &quot;static&quot;:{

        init:function () {
            this._super(arguments);
            this.__watchers = {};
        },
        //override the default set function so we can watch values
        &quot;set&quot;:_set,
        //set our callHandlers function
        __callHandlers:_callHandlers,
        //add the watch
        watch:_watch,
        //add the unwatch function
        unwatch:_unwatch
    }
})</code></pre>
<p>Now lets use the mixin

</p>
<pre class='prettyprint linenums lang-js'><code>var WatchDog = declare([Dog, WatchMixin]);

var watchDog = new WatchDog();
//create our handler
function watch(id, oldVal, newVal) {
    console.log(&quot;watchdog&#39;s %s was %s, now %s&quot;, id, oldVal, newVal);
}

//watch for property changes
watchDog.watch(&quot;type&quot;, watch);
watchDog.watch(&quot;color&quot;, watch);
watchDog.watch(&quot;sound&quot;, watch);

//now set the properties each handler will be called
watchDog.set(&quot;type&quot;, &quot;newDog&quot;);
watchDog.set(&quot;color&quot;, &quot;newColor&quot;);
watchDog.set(&quot;sound&quot;, &quot;newSound&quot;);


//unwatch the property changes
watchDog.unwatch(&quot;type&quot;, watch);
watchDog.unwatch(&quot;color&quot;, watch);
watchDog.unwatch(&quot;sound&quot;, watch);

//no handlers will be called this time
watchDog.set(&quot;type&quot;, &quot;newDog&quot;);
watchDog.set(&quot;color&quot;, &quot;newColor&quot;);
watchDog.set(&quot;sound&quot;, &quot;newSound&quot;);</code></pre>
<h3>Accessing static methods and properties witin an instance.</h3>
<p>To access static properties on an instance use the <code>_static</code> property which is a reference to your constructor.

</p>
<p>For example if your in your constructor and you want to have configurable default values.

</p>
<pre class='prettyprint linenums lang-js'><code>consturctor : function constructor(opts){
    this.opts = opts || {};
    this._type = opts.type || this._static.DEFAULT_TYPE;
}</code></pre>
<h3>Creating a new instance of within an instance.</h3>
<p>Often times you want to create a new instance of an object within an instance. If your subclassed however you cannot return a new instance of the parent class as it will not be the right sub class. <code>declare</code> provides a way around this by setting the <code>_static</code> property on each isntance of the class.

</p>
<p>Lets add a reproduce method <code>Mammal</code>

</p>
<pre class='prettyprint linenums lang-js'><code>reproduce : function(options){
    return new this._static(options);
}</code></pre>
<p>Now in each subclass you can call reproduce and get the proper type.

</p>
<pre class='prettyprint linenums lang-js'><code>var myDog = new Dog();
var myDogsChild = myDog.reproduce();

myDogsChild instanceof Dog; //true</code></pre>
<h3>Using the <code>as</code></h3>
<p><code>declare</code> also provides an <code>as</code> method which allows you to add your class to an object or if your using node.js you can pass in <code>module</code> and the class will be exported as the module.

</p>
<pre class='prettyprint linenums lang-js'><code>var animals = {};

Mammal.as(animals, &quot;Dog&quot;);
Wolf.as(animals, &quot;Wolf&quot;);
Dog.as(animals, &quot;Dog&quot;);
Breed.as(animals, &quot;Breed&quot;);

var myDog = new animals.Dog();</code></pre>
<p>Or in node

</p>
<pre class='prettyprint linenums lang-js'><code>Mammal.as(exports, &quot;Dog&quot;);
Wolf.as(exports, &quot;Wolf&quot;);
Dog.as(exports, &quot;Dog&quot;);
Breed.as(exports, &quot;Breed&quot;);</code></pre>
<p>To export a class as the <code>module</code> in node

</p>
<pre class='prettyprint linenums lang-js'><code>Mammal.as(module);</code></pre>


<hr>

Documentation generated using <a href="https://github.com/doug-martin/coddoc">coddoc</a>.


</div>
</div>
<script type="text/javascript" src="./assets/js/jquery.js"></script>
<script type="text/javascript" src="./assets/js/bootstrap.min.js"></script>
<script type="text/javascript" src="./assets/js/prettify.js"></script>

</body>
</html>

